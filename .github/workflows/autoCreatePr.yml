name: Auto Create Pull Request

on:
  push:
    branches:
      - feature
      - bugs

jobs:
  create-pr:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Create Pull Request Branch
      run: |
        # Create a new branch 'create-pull-request/patch'
        git checkout -B create-pull-request/patch
        # Fetch changes from the specified branch (feature or bugs)
        git fetch origin ${{ github.event_name == 'push' && contains(github.event.ref, 'feature') && 'feature' || 'bugs' }}:refs/remotes/origin/source-branch
        # Explicitly fetch the 'create-pull-request/patch' branch
        git fetch origin create-pull-request/patch:refs/remotes/origin/create-pull-request/patch
        git reset --hard origin/create-pull-request/patch


    - name: Create Pull Request
      uses: peter-evans/create-pull-request@v5
      with:
        commit-message: "Auto-generated changes"
        title: "Auto-generated Pull Request"
        body: "This pull request is automatically generated."
        base: dev
